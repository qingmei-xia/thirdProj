def gitSource = 'git@github.com:qingmei-xia/thirdProj.git';
def masterBranchName = 'master'

try {
  node {
    
    stage('Preparation') {
      echo 'Preparation'
      echo "BUILD_URL=${env.BUILD_URL}"
      def workspace = pwd()
      echo "workspace=${workspace}"

    checkout
    (
      [
        $class: 'GitSCM', 
        branches: [[name: '*/master']], 
        doGenerateSubmoduleConfigurations: false, 
        extensions: [], 
        submoduleCfg: [], 
        userRemoteConfigs: [[url: 'https://github.com/qingmei-xia/thirdProj']]
      ]
    )

      currentStageName = 'Preparation'
    }

    stage('Flyway') {
      echo 'Flyway'
          sh """
            mvn -P testdb flyway:info
          """
      }

      currentStageName = 'Flyway'
    }
    
  currentBuild.result = 'SUCCESS'
} catch (exc) {
  currentBuild.result = 'FAILURE'
  throw exc
}

